{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ blog.title }} - Techedu</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="{% static 'js/script.js' %}"></script>
</head>
<body>
    {% include 'app/navigation.html' %}

    <!-- login Detail Section -->
    <section id="login_form">
        <div class="content">
            <h1>Login</h1>
        </div>

        <div class="form">
            {% if messages %}
                <div class="messages">
                    {% for message in messages %}
                        <div style="position:relative; margin-bottom:8px;">
                            <p class="{% if message.tags %}{{ message.tags }}-message{% endif %}" style="margin:0; padding-right:28px;">
                                {{ message }}
                            </p>
                            <button onclick="this.parentElement.style.display='none';"
                                style="position:absolute;top:0;right:0;background:none;border:none;font-size:20px;line-height:1;color:#888;cursor:pointer;">&times;</button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}

            <h3>Login to Your Account</h3>
            <form method="post" action="{% url 'login' %}">
            <!-- Ensure you have the correct URL for your login view -->
                {% csrf_token %}
                <input type="text" name="username" placeholder="Username" required>
                <input type="password" name="password" placeholder="Password" required>
                <input type="submit" value="Login" class="btn">
            </form>
            <p>Don't have an account? <a href="{% url 'signup' %}">Sign Up</a> or <a href="#" id="forgotPasswordLink">Forgot password?</a></p>
        </div>
    </section>

    <!-- Modal/Section for Forgot Password -->
    <div id="forgotPasswordModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.3);z-index:9999;align-items:center;justify-content:center;">
      <div style="background:#fff;padding:32px 24px;border-radius:8px;max-width:400px;width:100%;position:relative;">
        <button onclick="document.getElementById('forgotPasswordModal').style.display='none'" style="position:absolute;top:8px;right:12px;background:none;border:none;font-size:22px;color:#888;cursor:pointer;">&times;</button>
        <h3>Reset your password</h3>
        <form method="POST" action="{% url 'forgot_password' %}" id="forgotPasswordForm">
          {% csrf_token %}
          <input type="email" name="email" placeholder="Enter your email" required style="margin-bottom:12px;">
          <input type="submit" value="Send new password" class="btn">
        </form>
        <div id="forgotPasswordMsg" style="margin-top:10px;color:#28a745;display:none;"></div>
      </div>
    </div>

    <script>
      document.getElementById('forgotPasswordLink').onclick = function(e) {
        e.preventDefault();
        document.getElementById('forgotPasswordModal').style.display = 'flex';
      };
      // Optional: handle AJAX for forgot password (if you want to avoid reload)
      document.getElementById('forgotPasswordForm').onsubmit = function(e) {
        // You can remove this block if you want normal POST
        // e.preventDefault();
        // ...
      };
    </script>

    {% include 'app/footer.html' %}

</body>
</html>